<?php
// Id: my_bookmarks.info, 2011/01/10 14:34:45 sheetal Exp $

/*
 * Implementation of hook_views_api().
 */
function my_bookmarks_views_api() {
  return array(
    'api' => 2,
    'path' => drupal_get_path('module', 'my_bookmarks') .'/views',
  );
}

 /**
 * Implementation of hook_views_default_views().
 *
 * To add a new view, create a separate .inc file in the views directory.
 */
function my_bookmarks_views_default_views() {
  return lib_views_load_module_default_views('my_bookmarks');
}

/**
 * Implementation of hook_flag_default_flags().
 */
function my_bookmarks_flag_default_flags() {
  $flags = array();
  module_load_include('inc', 'my_bookmarks', 'includes/my_bookmarks.flag_default');
  _my_bookmarks_page_flags($flags);    
  return $flags;
}

/**
 * Implementation of hook_token_list().
 */
function my_bookmarks_token_list($type = 'all') {
  $tokens = array();
  if ($type == 'global' || $type == 'all') {
    $tokens['global']['query-NAME'] = t('The value of the field <em>NAME</em> from the url query string.');
  }
  return $tokens;
}

/**
 * Implementation of hook_token_values().
 */
function my_bookmarks_token_values($type, $object = NULL) {
  if ($type = 'global') {
    // Pass along each query string as a token. This is used for default
    // bookmark titles. Also see http://drupal.org/node/550164.
    $values = array();
    $url = parse_url($_SERVER['REQUEST_URI']);
    $query = $url['query'];
    if (isset($query) && $query != '') {
      $output = array();
      parse_str($query, $output);
      foreach ($output as $field => $value) {
        $values['query-' . $field] = $value;
      }
      return $values;
    }
  }
}